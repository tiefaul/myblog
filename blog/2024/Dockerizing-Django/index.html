<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Dockerizing Django Application | Tyler Faulhaber </title> <meta name="author" content="Tyler Faulhaber"> <meta name="description" content="Using docker compose to containerize my Django application"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%8C%80&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://www.levitatecold.com/blog/2024/Dockerizing-Django/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Tyler Faulhaber </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">Career Overview </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Dockerizing Django Application</h1> <p class="post-meta"> Created in November 03, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/docker-compose"> <i class="fa-solid fa-hashtag fa-sm"></i> docker-compose</a>   <a href="/blog/tag/django"> <i class="fa-solid fa-hashtag fa-sm"></i> django</a>   <a href="/blog/tag/python"> <i class="fa-solid fa-hashtag fa-sm"></i> python</a>   <a href="/blog/tag/nginx"> <i class="fa-solid fa-hashtag fa-sm"></i> nginx</a>   ·   <a href="/blog/category/docker"> <i class="fa-solid fa-tag fa-sm"></i> docker</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Starting a new project is always exciting, especially when it brings together technologies like Django and Docker. For this project, I decided to build a to-do application using Django as the web framework. To simplify development and ensure consistency across environments, I set up a Docker container and a Docker Compose file. This setup allows for seamless deployment, making it as simple as running a single command to launch the app.</p> <p>In this blog, I’ll guide you through creating the Dockerfile and using Docker Compose to automate container setup, along with a special Nginx configuration to enhance the deployment. As someone aspiring to enter DevOps, I believe it’s crucial to understand the fundamentals of web frameworks. Exploring concepts like virtual environments, pipfiles, piplocks, environment variables, and configuring web servers like Nginx has been both educational and a lot of fun.</p> <p>If you’re new to Django, I highly recommend following a tutorial on building a web app with it. This not only broadens your Python skills but also introduces you to HTML, CSS, and other tools that can make an application visually engaging.</p> <hr> <h2 id="create-a-django-application">Create a Django Application</h2> <p>As I mentioned earlier, diving into Django is a great way to get comfortable with its functionality and structure. To start, I worked through the official Django documentation’s <a href="https://docs.djangoproject.com/en/5.1/" rel="external nofollow noopener" target="_blank">polling application tutorial</a>, which helped me understand the basics. From there, I chose to build a simple application of my own —to-do list app— as a foundation to practice and experiment with new features.</p> <p>After some research, I decided to follow the <a href="https://realpython.com/django-todo-lists/" rel="external nofollow noopener" target="_blank">Real Python tutorial on creating a Django to-do list</a>. If you’re interested in learning alongside me, I encourage you to try building this application first. Then, come back here to see how we can containerize it with Docker and deploy it locally on your home network.</p> <hr> <h2 id="creating-a-dockerfile">Creating a Dockerfile</h2> <p>A Dockerfile is a script containing a series of instructions that tells Docker how to build a custom container image. You specify things like the base image (e.g., Python or Ubuntu), the application code, required libraries, and any setup commands needed to get your app up and running. When you build this file, Docker uses these instructions to create a container image that you can deploy consistently across different environments.</p> <h3 id="the-dockerfile">The DockerFile</h3> <p>Here’s a basic Dockerfile for a Django application:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># First we import the python image from DockerHub (https://hub.docker.com/_/python)</span>

<span class="s">FROM python:3.12</span>

<span class="c1"># Standard environment variables when creating a python based dockerfile</span>
<span class="c1"># First env tells python not to write .pyc files. These files are unnecessary for a container.</span>
<span class="c1"># Second env tells python to output directly into the console without buffering</span>

<span class="s">ENV PYTHONDONTWRITEBYTECODE=1</span>
<span class="s">ENV PYTHONUNBUFFERED=1</span> 

<span class="c1"># Make a directory called app to store your django project, update any packages, and update pip</span>

<span class="s">RUN mkdir /app &amp;&amp; \</span> 
    <span class="s">apt update &amp;&amp; \</span>
    <span class="s">pip install --upgrade pip</span>

<span class="c1"># Set the new directory as the working directory    </span>

<span class="s">WORKDIR /app</span>

<span class="c1"># Copy all the files in your current directory on your host to the current directory of the container</span>

<span class="s">COPY . .</span>

<span class="c1"># Run commands to install the requirements from your requirements.txt</span>

<span class="s">RUN pip install -r requirements.txt</span>

<span class="c1"># Expose port 8000</span>

<span class="s">EXPOSE </span><span class="m">8000</span>

<span class="c1"># Commands to run when container is finished. Seperate each string with a comma.</span>

<span class="s">CMD ["gunicorn", "-b", "0.0.0.0:8000", "todo_website.wsgi:application"]</span>
</code></pre></div></div> <h3 id="why-we-use-gunicorn">Why we use Gunicorn</h3> <p>By default Django’s development server, <code class="language-plaintext highlighter-rouge">python manage.py runserver</code>, is intended for development and is not optimized for handling multiple requests at scale or ensuring stability needed in production.</p> <p>Gunicorn is bridge between Django and the web, efficiently handling multiple incoming requests by spawning multiple worker processes that manage these requests concurrently. This makes the app more responsive and capable of handling higher traffic volumes.</p> <p>In a typical setup, Gunicorn is often used together with a web server like Nginx. Nginx handles static file serving, load balancing, and reverse proxying to Gunicorn, Which then processes the actual application requests. This combination helps ensure performance, stability, and security for Django applications in production environments</p> <p>Here is an example of a Nginx config for Gunicorn:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># nginx.conf</span>

<span class="s">server {</span>
    <span class="s">listen 80;</span>

    <span class="s"># Replace this with your domain or IP</span>
    <span class="s">server_name example.domain.com;</span>

    <span class="s"># Serve static files</span>
    <span class="s">location /static/ {</span> <span class="c1"># This block tells nginx to handle requests that start with /static/</span>
        <span class="s">alias /app/static/;</span> <span class="c1"># This sets /app/static/ as the directory where nginx should look for the files requested under /static/</span>
    <span class="err">}</span>

    <span class="c1"># Proxy requests to Gunicorn</span>
    <span class="s">location / {</span>
        <span class="s">proxy_pass http://web:8000;</span> <span class="c1"># web is based on the service name in the docker compose file</span>
        <span class="s">proxy_set_header Host $host;</span> 
        <span class="s">proxy_set_header X-Real-IP $remote_addr;</span>
        <span class="s">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
        <span class="s">proxy_set_header X-Forwarded-Proto $scheme;</span>
    <span class="s">}</span>
<span class="err">}</span>
</code></pre></div></div> <hr> <h2 id="creating-the-docker-compose">Creating the Docker Compose</h2> <p>Docker Compose is a tool that simplifies the process of managing multi-container Docker applications. With Docker Compose, you can define all the services, networks, and volumes your app needs in a single <code class="language-plaintext highlighter-rouge">docker-compose.yaml</code> file. This will specify how each container should be configured, such as which Docker image to use, any environment variables, and how containers should interact.</p> <p>Here is an example of my <code class="language-plaintext highlighter-rouge">docker-compose.yaml</code> file:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">todoapp</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span> <span class="c1"># service name</span>
    <span class="na">build</span><span class="pi">:</span> <span class="c1"># This tells Docker to generate the image directly from the project's Dockerfile instead of using a pre-built one like we did for nginx.</span>
      <span class="na">context</span><span class="pi">:</span> <span class="s">.</span> <span class="c1"># Defines a path to a directory that contains a Dockerfile, or a URL to a git repo.</span>
      <span class="na">dockerfile</span><span class="pi">:</span> <span class="s">Dockerfile</span> <span class="c1"># Can set an alternate Dockerfile. So this file could be called "app.Dockerfile".</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">static_volume:/app/static/</span> <span class="c1"># Stores our static files</span>
      <span class="pi">-</span> <span class="s">./db.sqlite3:/app/db.sqlite3</span> <span class="c1"># Mount the SQLite database file if you want to persist it.</span>
    <span class="na">expose</span><span class="pi">:</span> <span class="c1"># Expose is only used to connect to other services in the Dockerfile</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">8000"</span>
    <span class="na">env_file</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">./.env</span>
    
  <span class="na">nginx</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">nginx:latest</span>
    <span class="na">ports</span><span class="pi">:</span> <span class="c1"># Ports is used if you want clients/services outside of the Dockerfile to connect.</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">80:80"</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">static_volume:/app/static</span> <span class="c1"># Link the same static files directory</span>
      <span class="pi">-</span> <span class="s">./nginx.conf:/etc/nginx/conf.d/default.conf</span> <span class="c1"># Replace the contents of nginx.conf into the default.conf of nginx.</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">web</span> <span class="c1"># Nginx should depend on the web service, it gets built after the web service.</span>

<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">static_volume</span><span class="pi">:</span> <span class="c1"># Create the static_volume</span>
</code></pre></div></div> <p>Here you can see I have two services. The first service image is the DockerFile I created in my apps root directory. The second service is a Nginx image pulled from DockerHub. With this setup, when I run <code class="language-plaintext highlighter-rouge">docker compose up</code>, Docker will build both these containers and set up how they should connect to each other. This makes it much easier to deploy and manage complex applications.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Grafana-Dashboard/">InfluxDB and Grafana</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Jekyll-Website/">Hosting my first website</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Tyler Faulhaber. Last updated: November 04, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"About",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"Blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-repositories",title:"Repositories",description:"Welcome to the Repositories section of my website! Here, you&#39;ll find links to my public GitHub repositories, showcasing the projects I&#39;ve created and the code I&#39;ve developed, primarily in Python. As a beginner in coding, I&#39;m excited to share my journey from novice to expert. I hope you enjoy following along as I learn, grow, and improve my skills in the world of programming.",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-career-overview",title:"Career Overview",description:"Explore my professional journey, including my work experience, educational background, certifications, and more.",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"post-dockerizing-django-application",title:"Dockerizing Django Application",description:"Using docker compose to containerize my Django application",section:"Posts",handler:()=>{window.location.href="/blog/2024/Dockerizing-Django/"}},{id:"post-influxdb-and-grafana",title:"InfluxDB and Grafana",description:"Using flux and grafana to monitor my Proxmox server",section:"Posts",handler:()=>{window.location.href="/blog/2024/Grafana-Dashboard/"}},{id:"post-hosting-my-first-website",title:"Hosting my first website",description:"Learning how to set up and host my own website using Jekyll.",section:"Posts",handler:()=>{window.location.href="/blog/2024/Jekyll-Website/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%74%79%6C%65%72%66%61%75%6C%68%61%62%65%72@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/tiefaul","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/tyler-faulhaber","_blank")}},{id:"socials-instagram",title:"Instagram",section:"Socials",handler:()=>{window.open("https://instagram.com/tymwfr98","_blank")}},{id:"socials-discord",title:"Discord",section:"Socials",handler:()=>{window.open("https://discord.com/users/ogcoldheart","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>